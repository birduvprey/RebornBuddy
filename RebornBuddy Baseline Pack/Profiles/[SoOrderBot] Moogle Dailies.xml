<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Profile [
  <!ENTITY Version "1.0.5">
  <!ENTITY doRepQuests "0">
  <!ENTITY craftGearSet "14">
  <!ENTITY combatGearSet "1">
  <!-- Debug -->
  <!ENTITY doTurnIn "1">
]>
<Profile>
  <Name>[SoOrderBot] Moogle Dailies</Name>
  <Order>
    <SoRegisterDailies QuestIds="67826,67827,67828,67829,67830,67831,67832,67833,67834,67835,67836,67837,67838,67839,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855" />
    <If Condition="&doRepQuests;">
      <If Condition="not IsQuestCompleted(67856)">
      <SoSendCommand GearSet="&craftGearSet;" />
      <!-- Tricks and Stones -->
      <SoPickUpQuest QuestId="67856" NpcId="1017328" XYZ="234.3328, -42.20274, 601.007" MapId="400" />
      <SoTalkTo NpcId="1017329" XYZ="351.7662, -74.80417, 629.9688" QuestId="67856" StepId="1" MapId="400" NoFlight="True" />
      <SoTalkTo NpcId="1012163" XYZ="128.252, 24.45884, -0.6867676" QuestId="67856" StepId="2" MapId="418" />
      <SoTalkTo NpcId="1017330" XYZ="-246.7231, -20.03492, -90.10455" QuestId="67856" StepId="3" MapId="419" />
      <!-- Fake Kupo Nut -->
      <While Condition="GetQuestStep(67856) == 4 and not HasAtLeast(15720,1)">
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
          <Synthesize RecipeId="31591" />
          <While Condition="CraftingManager.IsCrafting">
            <CraftAction Name="Basic Synthesis" ActionId="100001" />
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
          <Synthesize RecipeId="31617" />
          <While Condition="CraftingManager.IsCrafting">
            <CraftAction Name="Basic Synthesis" ActionId="100015" />
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
          <Synthesize RecipeId="31643" />
          <While Condition="CraftingManager.IsCrafting">
            <CraftAction Name="Basic Synthesis" ActionId="100030" />
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
          <Synthesize RecipeId="31669" />
          <While Condition="CraftingManager.IsCrafting">
            <CraftAction Name="Basic Synthesis" ActionId="100075" />
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
          <Synthesize RecipeId="31695" />
          <While Condition="CraftingManager.IsCrafting">
            <CraftAction Name="Basic Synthesis" ActionId="100045" />
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
          <Synthesize RecipeId="31721" />
          <While Condition="CraftingManager.IsCrafting">
            <CraftAction Name="Basic Synthesis" ActionId="100060" />
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
          <Synthesize RecipeId="31747" />
          <While Condition="CraftingManager.IsCrafting">
            <CraftAction Name="Basic Synthesis" ActionId="100090" />
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
          <Synthesize RecipeId="31773" />
          <While Condition="CraftingManager.IsCrafting">
            <CraftAction Name="Basic Synthesis" ActionId="100105" />
          </While>
        </If>
      </While>
      <If Condition="GetQuestStep(67856) == 4 and HasAtLeast(15720,1)">
        <StopCrafting />
        <SoHandOver ItemIds="15720" NpcId="1017330" XYZ="-246.7231, -20.03492, -90.10455" QuestId="67856" StepId="4" />
      </If>
      <SoTalkTo NpcId="1017331" XYZ="-366.8422, 60.89617, 312.6726" QuestId="67856" StepId="5" MapId="400" />
      <SoTalkTo NpcId="1017334" XYZ="-614.374, 48, 326.2836" QuestId="67856" StepId="6" MapId="400" />
      <SoTalkTo NpcId="1017331" XYZ="-366.8422, 60.89617, 312.6726" QuestId="67856" StepId="7" MapId="400" />
      <If Condition="&doTurnIn;">
        <SoTurnIn QuestId="67856" NpcId="1017335" XYZ="-370.9926, 60.86112, 309.8954" DialogOption="0" MapId="400" />
      </If>
    </If>
      <If Condition="not IsQuestCompleted(67857)">
      <SoSendCommand GearSet="&craftGearSet;" />
      <!-- The Milk of Moogle Kindness -->
      <SoPickUpQuest QuestId="67857" NpcId="1017169" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
      <SoTalkTo NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67857" StepId="1" MapId="400" />
      <SoMoveTo XYZ="-95.50629, -8.845936, 189.5018" QuestId="67857" StepId="2" MapId="400"/>
      <SoTalkTo NpcId="1017339" XYZ="-104.8753, 36.39444, 170.489" QuestId="67857" StepId="2" MapId="400" NoFlight="True" />
      <SoTalkTo NpcId="1017341" XYZ="-90.92853, -8.655592, 173.8459" QuestId="67857" StepId="3" DialogOption="0" MapId="400" />
      <SoMoveTo XYZ="254.1389, -43.16044, 626.3981" QuestId="67857" StepId="4" MapId="400" />
      <SoTalkTo NpcId="1012078" XYZ="375.3567, -69.42934, 693.5072" QuestId="67857" StepId="4" MapId="400" NoFlight="True" />
      <SoMoveTo XYZ="254.1389, -43.16044, 626.3981" QuestId="67857" StepId="5" MapId="400" NoFlight="True" />
      <SoTalkTo NpcId="1017339" XYZ="-104.8753, 36.39444, 170.489" QuestId="67857" StepId="5" MapId="400" />
      <SoTalkTo NpcId="1017342" XYZ="230.579, -6.053303, 44.54102" QuestId="67857" StepId="6" MapId="400" />
      <SoTalkTo NpcId="1017343" XYZ="-375.4788, 60.10645, 307.2709" QuestId="67857" StepId="7" MapId="400" />
      <SoTalkTo NpcId="1017322" XYZ="-331.5633, 58.8232, 323.1708" QuestId="67857" StepId="8" MapId="400" />
      <SoUseSpell SpellId="6294" NpcIds="2007197" XYZ="-376.8521, 60.13574, 302.6931" Radius="10" QuestId="67857" StepId="9" MapId="400" />
      <If Condition="&doTurnIn;">
        <SoTurnIn QuestId="67857" NpcId="1017169" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" /> 
      </If>
    </If>
      <If Condition="not IsQuestCompleted(67858)">
      <SoSendCommand GearSet="&craftGearSet;" />
      <!-- Trying Times -->
      <SoPickUpQuest QuestId="67858" NpcId="1017169" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
      <SoTalkTo NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67858" StepId="1" MapId="400" />
      <SoUseObject NpcIds="2007198" XYZ="-339.6506, 58.97607, 319.5085" Radius="15" QuestId="67858" StepId="2" MapId="400" />
      <SoTalkTo NpcId="1017432" XYZ="-743.6179, 81, 372.1521" QuestId="67858" StepId="3" MapId="400" />
      <SoTalkTo NpcId="1017169" XYZ="-342.1531, 59.03801, 315.1445" QuestId="67858" StepId="4" DialogOption="0" MapId="400" />
      <SoTalkTo NpcId="1017172" XYZ="-329.3355, 59.0564, 298.2375" QuestId="67858" StepId="5" MapId="400" />
      <!-- Horn Component -->
      <While Condition="GetQuestStep(67858) == 6 and not HqHasAtLeast(15721,1)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31592"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31618"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31644"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31670"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31696"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31722"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31748"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31774"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
      <If Condition="GetQuestStep(67858) == 6 and HqHasAtLeast(15721,1)">
        <StopCrafting />
        <SoHandOver ItemIds="15721" NpcId="1017169" XYZ="-342.1531, 59.03801, 315.1445" QuestId="67858" StepId="6" MapId="400" />
      </If>
      <SoTalkTo NpcId="1017432" XYZ="-743.6179, 81, 372.1521" QuestId="67858" StepId="7" MapId="400" />
      <If Condition="&doTurnIn;">
        <SoTurnIn QuestId="67858" NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" MapId="400" />
      </If>
    </If>
      <If Condition="not IsQuestCompleted(67859)">
      <SoSendCommand GearSet="&craftGearSet;" />
      <!-- A Crystalline Solution -->
      <SoPickUpQuest QuestId="67859" NpcId="1017169" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
      <SoTalkTo NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67859" StepId="1" MapId="400" />
      <SoTalkTo NpcId="1017437" XYZ="-628.3818, 81, 136.1257" QuestId="67859" StepId="2" MapId="400" />
      <SoTalkTo NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67859" StepId="3" DialogOption="0" MapId="400" />
      <SoUseObject NpcIds="2007199" XYZ="-651.1177, 249.0425, -770.6264" Radius="15" QuestId="67859" StepId="4" MapId="400" />
      <SoTalkTo NpcId="1017442" XYZ="-652.8268, 248.6951, -767.8798" QuestId="67859" StepId="5" MapId="400" />
      <SoTalkTo NpcId="1017432" XYZ="-743.6179, 81, 372.1521" QuestId="67859" StepId="6" MapId="400" />
      <SoUseSpell SpellId="6293" NpcIds="2007199" XYZ="-651.1177, 249.0425, -770.6264" Radius="15" QuestId="67859" StepId="7" MapId="400" />
      <SoTalkTo NpcId="1017437" XYZ="-628.3818, 81, 136.1257" QuestId="67859" StepId="8" MapId="400" />
      <If Condition="&doTurnIn;">
        <SoTurnIn QuestId="67859" ItemIds="2001886" NpcId="1017169" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
      </If>
    </If>
      <If Condition="not IsQuestCompleted(67860)">
      <SoSendCommand GearSet="&craftGearSet;" />
      <!-- The Tools Make the Moogle -->
      <SoPickUpQuest QuestId="67860" NpcId="1017169" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
      <SoTalkTo NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67860" StepId="1" MapId="400" />
      <SoTalkTo NpcId="1017446" XYZ="-103.9293, -8.845976, 216.3577" QuestId="67860" StepId="2" MapId="400" />
      <SoHandOver ItemIds="2001978" NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67860" StepId="3" MapId="400" />
      <SoHandOver ItemIds="2001978" NpcId="1017172" XYZ="-329.3355, 59.0564, 298.2375" QuestId="67860" StepId="4" MapId="400" />
      <!-- Moogle Tool Component -->
      <While Condition="GetQuestStep(67860) == 255 and not HqHasAtLeast(15722,1)">
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
          <Synthesize RecipeId="31593"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="244"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100001"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="260"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100008"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
          <Synthesize RecipeId="31619"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="245"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100015"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="261"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100022"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
          <Synthesize RecipeId="31645"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="246"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100030"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="262"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100038"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
          <Synthesize RecipeId="31671"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="247"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100075"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="263"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100081"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
          <Synthesize RecipeId="31697"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="249"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100045"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="265"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100052"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
          <Synthesize RecipeId="31723"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="248"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100060"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="264"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100068"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
          <Synthesize RecipeId="31749"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="250"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100090"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="266"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100097"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
          <Synthesize RecipeId="31775"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="251"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100105"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="267"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100112"/>
            </If>
          </While>
        </If>
      </While>
      <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15722,1)">
        <StopCrafting />
      </If>
      <SoTurnIn QuestId="67860" ItemIds="15722" NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" MapId="400" />
    </If>
      <If Condition="not IsQuestCompleted(67861)">
      <!-- A Monumental Task -->
      <SoSendCommand GearSet="&craftGearSet;" />
      <SoPickUpQuest QuestId="67861" NpcId="1017320" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
      <SoTalkTo NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67861" StepId="1" MapId="400" />
      <SoHandOver ItemIds="2001979" NpcId="1012163" XYZ="128.252, 24.45884, -0.6867676" QuestId="67861" StepId="2" MapId="418" />
      <SoTalkTo NpcId="1012162" XYZ="135.9731, 24.37643, 12.6192" QuestId="67861" StepId="3" MapId="418" />
      <SoHandOver ItemIds="2001980" NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67861" StepId="4" MapId="400" />
      <SoTalkTo NpcId="1017172" XYZ="-329.3355, 59.0564, 298.2375" QuestId="67861" StepId="5" MapId="400" />
      <!-- Statue Supplies -->
      <While Condition="GetQuestStep(67861) == 255 and not HqHasAtLeast(15723,1)">
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
          <Synthesize RecipeId="31594"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="244"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100001"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100008"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
          <Synthesize RecipeId="31620"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="245"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100015"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="261"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100022"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
          <Synthesize RecipeId="31646"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="246"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100030"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="262"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100038"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
          <Synthesize RecipeId="31672"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="247"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100075"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="263"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100081"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
          <Synthesize RecipeId="31698"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="249"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100045"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="265"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100052"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
          <Synthesize RecipeId="31724"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="248"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100060"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="264"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100068"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
          <Synthesize RecipeId="31750"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="250"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100090"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="266"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100097"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
          <Synthesize RecipeId="31776"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="251"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100105"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="267"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100112"/>
            </If>
          </While>
        </If>
      </While>
      <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15723,1)">
        <StopCrafting />
      </If>
      <SoTurnIn ItemIds="15723" QuestId="67861" NpcId="1017320" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
    </If>
      <If Condition="not IsQuestCompleted(67862)">
      <!-- Piecing Together the Past -->
      <SoSendCommand GearSet="&craftGearSet;" />
      <SoPickUpQuest QuestId="67862" NpcId="1017320" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
      <SoTalkTo NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67862" StepId="1" MapId="400" />
      <SoTalkTo NpcId="1011935" XYZ="-285.6337, 39.04305, 53.72693" QuestId="67862" StepId="2" NoFlight="True" MapId="398" />
      <SoTalkTo NpcId="1017447" XYZ="-374.9905, 58.99875, 340.1693" QuestId="67862" StepId="3" MapId="400" />
      <SoUseObject NpcIds="2007221,2007201,2007202" XYZ="-367.6356, 59.8916, 333.4553" Radius="25" QuestId="67862" StepId="4" MapId="400" />
      <SoHandOver ItemIds="2001981" NpcId="1017447" XYZ="-374.9905, 58.99875, 340.1693" QuestId="67862" StepId="5" MapId="400" />
      <SoTalkTo NpcId="1017448" XYZ="-383.3524, 59.9946, 297.7493" QuestId="67862" StepId="6" MapId="400" />
      <SoTalkTo NpcId="1017172" XYZ="-329.3355, 59.0564, 298.2375" QuestId="67862" StepId="7" MapId="400" />
      <!-- Tablet Supplies -->
      <While Condition="GetQuestStep(67862) == 255 and not HqHasAtLeast(15724,1)">
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
          <Synthesize RecipeId="31595"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="244"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100001"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100008"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
          <Synthesize RecipeId="31621"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="245"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100015"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="261"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100022"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
          <Synthesize RecipeId="31647"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="246"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100030"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="262"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100038"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
          <Synthesize RecipeId="31673"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="247"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100075"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="263"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100081"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
          <Synthesize RecipeId="31699"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="249"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100045"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="265"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100052"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
          <Synthesize RecipeId="31725"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="248"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100060"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="264"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100068"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
          <Synthesize RecipeId="31751"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="250"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100090"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="266"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100097"/>
            </If>
          </While>
        </If>
        <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
          <Synthesize RecipeId="31777"/>
          <While Condition="CraftingManager.IsCrafting">
            <If Condition="Core.Player.CurrentCPPercent == 100">
              <CraftAction Name="Steady Hand" ActionId="251"/>
            </If>
            <If Condition="CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Basic Synthesis" ActionId="100105"/>
            </If>
            <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Great Strides" ActionId="267"/>
            </If>
            <If Condition="not CraftingManager.HQPercent &gt; 80">
              <CraftAction Name="Advanced Touch" ActionId="100112"/>
            </If>
          </While>
        </If>
      </While>
      <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15724,1)">
        <StopCrafting />
      </If>
      <SoTurnIn ItemIds="15724" QuestId="67862" NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" MapId="400" />
    </If>
      <If Condition="not IsQuestCompleted(67863)">
      <!-- The Zenith of Craftsmanship -->
      <SoSendCommand GearSet="&craftGearSet;" />
      <SoPickUpQuest QuestId="67863" NpcId="1017320" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
      <SoTalkTo NpcId="1017170" XYZ="-344.2283, 59.03801, 317.1587" QuestId="67863" StepId="1" Objective="0" MapId="400" />
      <SoTalkTo NpcId="1017173" XYZ="-363.8209, 60.89619, 306.3859" QuestId="67863" StepId="1" MapId="400" />
      <SoTurnIn QuestId="67863" NpcId="1017320" XYZ="-342.1531, 59.03801, 315.1445" MapId="400" />
    </If>
    </If>
    <If Condition="not HasAtLeastOneQuest(Array[int]([67826,67827,67828,67829,67830,67831,67832,67833,67834,67835,67836,67837,67838,67839,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855]))">
      <SoSendCommand GearSet="&craftGearSet;" />
      <!-- With a Little Help -->
      <SoPickUpQuest QuestId="67826" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Hasty Conclusions -->
      <SoPickUpQuest QuestId="67827" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- A Fundamentally Important Task -->
      <SoPickUpQuest QuestId="67828" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Deep into the Weeds -->
      <SoPickUpQuest QuestId="67829" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Moogle on the Wall -->
      <SoPickUpQuest QuestId="67830" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Kupo for Kupo Nuts -->
      <SoPickUpQuest QuestId="67831" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Work That Mallow  -->
      <SoPickUpQuest QuestId="67832" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- A Little Pick-Me-Up -->
      <SoPickUpQuest QuestId="67833" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- A Fine Finish -->
      <SoPickUpQuest QuestId="67834" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- The Mining Mishap -->
      <SoPickUpQuest QuestId="67835" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Stumbling Blocks -->
      <SoPickUpQuest QuestId="67836" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Tricks Without Treats -->
      <SoPickUpQuest QuestId="67837" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- For Moogles in Peril -->
      <SoPickUpQuest QuestId="67838" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- The Negotiator -->
      <SoPickUpQuest QuestId="67839" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Back to the Drawing Board  -->
      <SoPickUpQuest QuestId="67840" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Built to Last -->
      <SoPickUpQuest QuestId="67841" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Let There Be Light -->
      <SoPickUpQuest QuestId="67842" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Rare Refreshments -->
      <SoPickUpQuest QuestId="67843" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- A Stone's Throw Away -->
      <SoPickUpQuest QuestId="67844" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- A Reviving Roar -->
      <SoPickUpQuest QuestId="67845" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Journey of a Thousand Hews -->
      <SoPickUpQuest QuestId="67846" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Ship of Dreams -->
      <SoPickUpQuest QuestId="67847" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Stirring by Sternutation -->
      <SoPickUpQuest QuestId="67848" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Dragon Draff For Their Behalf -->
      <SoPickUpQuest QuestId="67849" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- A Fish for His Favors -->
      <SoPickUpQuest QuestId="67850" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- From Lax to Max -->
      <SoPickUpQuest QuestId="67851" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- An Ishgardian Treat -->
      <SoPickUpQuest QuestId="67852" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Mine and Craft -->
      <SoPickUpQuest QuestId="67853" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- The Moogle Motivator -->
      <SoPickUpQuest QuestId="67854" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Tremble Finishing -->
      <SoPickUpQuest QuestId="67855" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
    </If>
    <!-- Dragonet -->
    <!-- For Moogles in Peril -->
    <SoTalkTo NpcId="1017470" XYZ="-353.9962, 61.13389, 302.585" QuestId="67838" StepId="1" MapId="400" />
    <SoUseSpell SpellId="6293" NpcIds="2007272" XYZ="307.9027, -35.21448, 116.9507" Radius="10" QuestId="67838" StepId="2" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6293" NpcIds="2007273" XYZ="430.4096, -23.0256, 106.3213" Radius="10" QuestId="67838" StepId="3" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6293" NpcIds="2007274" XYZ="390.7072, -35.5993, 252.5825" Radius="10" QuestId="67838" StepId="4" MapId="400" />
    <!-- Let There Be Light -->
    <SoTalkTo NpcId="1017470" XYZ="-353.9962, 61.13389, 302.585" QuestId="67842" StepId="1" MapId="400" />
    <SoUseSpell SpellId="6293" NpcIds="2007264" XYZ="505.3767, 8.971974, -354.2362" Radius="10" QuestId="67842" StepId="2" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6293" NpcIds="2007265" XYZ="608.239, -2.808969, -337.5968" Radius="10" QuestId="67842" StepId="3" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6293" NpcIds="2007266" XYZ="554.3868, 50.66241, -393.3789" Radius="10" QuestId="67842" StepId="4" MapId="400" />
    <!-- A Revivfying Roar -->
    <SoTalkTo NpcId="1017470" XYZ="-353.9962, 61.13389, 302.585" QuestId="67845" StepId="1" MapId="400" />
    <SoUseSpell SpellId="6293" NpcIds="2007275" XYZ="-147.0513, 77.65308, -189.7765" Radius="10" QuestId="67845" StepId="2" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6293" NpcIds="2007276" XYZ="-190.2038, 77.65308, -304.4938" Radius="10" QuestId="67845" StepId="3" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6293" NpcIds="2007277" XYZ="-75.88312, 77.65308, -347.799" Radius="10" QuestId="67845" StepId="4" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6293" NpcIds="2007278" XYZ="-32.85278, 77.62268, -233.8751" Radius="10" QuestId="67845" StepId="5" MapId="400" />
    <!-- Tremble Finishing -->
    <SoTalkTo NpcId="1017470" XYZ="-353.9962, 61.13389, 302.585" QuestId="67855" StepId="1" MapId="400" />
    <SoUseSpell SpellId="6293" NpcIds="2007283" XYZ="-177.8745, 53.05554, 53.66589" Radius="10" QuestId="67855" StepId="2" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6293" NpcIds="2007284" XYZ="-320.6074, 220.386, -708.0034" Radius="10" QuestId="67855" StepId="3" MapId="400" />
    <!-- Cloud Mallow -->
    <!-- A Little Pick-Me-Up -->
    <SoTalkTo NpcId="1017322" XYZ="-331.5633, 58.8232, 323.1708" QuestId="67833" StepId="1" MapId="400" />
    <SoUseSpell SpellId="6294" NpcIds="1017371" XYZ="-740.3076, 81, 426.6342" Radius="10" QuestId="67833" StepId="2" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6294" NpcIds="1017374" XYZ="-43.6879, 81.23354, -265.3469" Radius="10" QuestId="67833" StepId="3" MapId="400" />
    <!-- Stirring by Sternutation -->
    <SoTalkTo NpcId="1017322" XYZ="-331.5633, 58.8232, 323.1708" QuestId="67848" StepId="1" MapId="400" />
    <SoUseSpell SpellId="6294" NpcIds="2007279" XYZ="-486.6255, 37.86684, 157.3052" Radius="10" QuestId="67848" StepId="2" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6294" NpcIds="2007280" XYZ="-380.2091, 39.87183, -23.8194" Radius="10" QuestId="67848" StepId="3" MapId="400" DismountAfter="False" />
    <SoUseSpell SpellId="6294" NpcIds="2007281" XYZ="-52.32324, 81.80359, -116.2585" Radius="10" QuestId="67848" StepId="4" MapId="400" />
    <!-- Open World -->
    <!-- Dragon Draff For Their Behalf -->
    <SoTalkTo NpcId="1017453" XYZ="-840.8484, 32.5, 481.4373" QuestId="67849" StepId="1" MapId="400" />
    <SoUseObject NpcIds="2007256" XYZ="-846.4332, 32.5, 477.6836" Radius="15" QuestId="67849" StepId="2" MapId="400" />
    <SoHandOver ItemIds="2001995" NpcId="1017453" XYZ="-840.8484, 32.5, 481.4373" QuestId="67849" StepId="3" MapId="400" />
    <!-- Dragonscale Rasp -->
    <While Condition="GetQuestStep(67849) == 4 and not HasAtLeast(15741,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31612"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31638"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31664"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31690"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31716"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31742"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31768"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31794"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15741,3)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15741" NpcId="1017549" XYZ="-836.9116, 35.2195, 457.6637" QuestId="67849" StepId="4" MapId="400" />
    <!-- From Lax to Max -->
    <SoUseObject NpcIds="1017457,1017458,1017459" XYZ="-618.7381, 70, 207.9347" Radius="25" QuestId="67851" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017352" XYZ="-56.80939, -8.866012, 161.8219" QuestId="67851" StepId="2" MapId="400" />
    <!-- Moogles are persistent objects -->
    <SoUseObject NpcIds="1017461" XYZ="79.9115, -22.83803, -123.6744" Radius="10" QuestId="67851" StepId="3" Objective="0" Count="1" MapId="400" />
    <SoUseObject NpcIds="1017462" XYZ="-479.0875, 106.9268, -112.0775" Radius="10" QuestId="67851" StepId="3" Objective="0" Count="2" MapId="400" />
    <SoUseObject NpcIds="1017460" XYZ="-689.0516, 78.99983, 266.0105" Radius="10" QuestId="67851" StepId="3" Objective="0" Count="3" MapId="400" />
    <SoHandOver ItemIds="2001997,2001998,2001999" NpcId="1017352" XYZ="-56.80939, -8.866012, 161.8219" QuestId="67851" StepId="4" MapId="400" />
    <!-- A Fish for His Favors -->
    <SoTalkTo NpcId="1017455" XYZ="3.433307, -23.61804, 144.0993" QuestId="67850" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017351" XYZ="-74.87604, -8.172174, 158.709" QuestId="67850" StepId="2" MapId="400" />
    <!-- Cloudfish Lure -->
    <While Condition="GetQuestStep(67850) == 3 and not HqHasAtLeast(15742,1)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31613"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31639"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31665"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31691"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31717"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31743"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31769"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31795"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15742,1)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15742" NpcId="1017455" XYZ="3.433307, -23.61804, 144.0993" QuestId="67850" StepId="3" MapId="400" />
    <SoMoveTo XYZ="-133.2494, 165.6114, -789.395" QuestId="67850" StepId="4" MapId="400" />
    <SoTalkTo NpcId="1017456" XYZ="-152.0256, 160.9406, -770.5043" QuestId="67850" StepId="4" MapId="400" />
    <SoHandOver ItemIds="2001996" NpcId="1017470" XYZ="-353.5363, 60.89618, 299.6108" QuestId="67850" StepId="5" MapId="400" />
    <!-- An Ishgardian Treat -->
    <SoTalkTo NpcId="1017321" XYZ="-376.4859, 60.89619, 319.7832" QuestId="67852" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017351" XYZ="-74.87604, -8.172174, 158.709" QuestId="67852" StepId="2" MapId="400" />
    <!-- Ishgardian Cuisine Miscellany -->
    <While Condition="GetQuestStep(67852) == 3 and not HasAtLeast(15743,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31614"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31640"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31666"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31692"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31718"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31744"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31770"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31796"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15743,3)">
      <StopCrafting />
    </If>
    <!-- The Moogle Motivator -->
    <SoTalkTo NpcId="1017351" XYZ="-74.87604, -8.172174, 158.709" QuestId="67854" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017467" XYZ="-40.20758, -8.65556, 202.8381" QuestId="67854" StepId="2" MapId="400" />
    <SoEmoteNpc Emote="psych" NpcIds="1017624" XYZ="-76.0968, -8.65556, 216.1746" Radius="10" QuestId="67854" StepId="3" MapId="400" />
    <SoEmoteNpc Emote="slap" NpcIds="1017625" XYZ="-46.76892, 10.7652, 243.1219" Radius="10" QuestId="67854" StepId="4" MapId="400" />
    <SoTalkTo NpcId="1017351" XYZ="-74.87604, -8.172174, 158.709" QuestId="67854" StepId="5" MapId="400" />
    <!-- Moogle Mollifier -->
    <While Condition="GetQuestStep(67854) == 6 and not HqHasAtLeast(15745,1)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31616"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31642"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31668"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31694"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31720"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31746"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31772"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31798"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15745,1)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15745" NpcId="1017625" XYZ="-46.76892, 10.7652, 243.1219" Distance="1" QuestId="67854" StepId="6" MapId="400" />
    <!-- Ship of Dreams -->
    <SoTalkTo NpcId="1017422" XYZ="-8.804504, 81.8406, -312.0013" QuestId="67847" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017424" XYZ="7.431091, 81.8406, -321.1872" QuestId="67847" StepId="2" MapId="400" />
    <SoTalkTo NpcId="1017422" XYZ="-8.804504, 81.8406, -312.0013" QuestId="67847" StepId="3" MapId="400" />
    <!-- Makeshift Toy Airship -->
    <While Condition="GetQuestStep(67847) == 4 and not HasAtLeast(15740,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31611"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31637"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31663"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31689"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31715"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31741"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31767"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31793"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15740,3)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15740" NpcId="1017424" XYZ="7.431091, 81.8406, -321.1872" QuestId="67847" StepId="4" MapId="400" />
    <SoTalkTo NpcId="1017422" XYZ="-8.804504, 81.8406, -312.0013" QuestId="67847" StepId="5" MapId="400" />
    <!-- Journey of a Thousand Hews -->
    <SoTalkTo NpcId="1017416" XYZ="-696.9253, 180.2342, 709.8954" QuestId="67846" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017421" XYZ="217.5173, 6.122815, 721.95" QuestId="67846" StepId="2" MapId="400" />
    <!-- Moogle Statuette -->
    <While Condition="GetQuestStep(67846) == 3 and not HqHasAtLeast(15739,1)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31610"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31636"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31662"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31688"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31714"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31740"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31766"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31792"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15739,1)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15739" NpcId="1017416" XYZ="-696.9253, 180.2342, 709.8954" QuestId="67846" StepId="3" MapId="400" />
    <!-- Built to Last -->
    <SoTalkTo NpcId="1017471" XYZ="-391.0735, 59.9946, 303.1814" QuestId="67841" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017409" XYZ="-254.7189, -24.29516, 738.5519" QuestId="67841" StepId="2" MapId="400" />
    <SoUseObject NpcIds="2007244,2007245,2007246" QuestId="67841" StepId="3" MapId="400">
      <HotSpots>
        <HotSpot XYZ="-658.9609, 94.25488, -417.0748" Radius="15" />
        <HotSpot XYZ="-671.1376, 93.91919, -507.4998" Radius="15" />
        <HotSpot XYZ="-813.1685, 94.86523, -457.3282" Radius="15" />
      </HotSpots>
    </SoUseObject>
    <SoHandOver ItemIds="2001989" NpcId="1017409" XYZ="-254.7189, -24.29516, 738.5519" QuestId="67841" StepId="4" MapId="400" />
    <!-- Water Filter Component -->
    <While Condition="GetQuestStep(67841) == 5 and not HqHasAtLeast(15737,1)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31608"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31634"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31660"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31686"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31712"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31738"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31764"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31790"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15737,1)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15737" NpcId="1017410" XYZ="-246.2044, -24.29515, 760.7384" QuestId="67841" StepId="5" MapId="400" />
    <!-- The Negotiator -->
    <SoTalkTo NpcId="1017403" XYZ="-685.1342, 335, 166.1983" QuestId="67839" StepId="1" MapId="400" />
    <!-- Austere Offerings -->
    <While Condition="GetQuestStep(67839) == 2 and not HqHasAtLeast(15735,2)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31606"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31632"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31658"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31684"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31710"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31736"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31762"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31788"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15735,2)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15735" NpcId="1017534" XYZ="-662.0462, 335, 159.3557" QuestId="67839" StepId="2" MapId="400" />
    <!-- Back to the Drawing Board  -->
    <SoTalkTo NpcId="1017406" XYZ="-95.04846, 79.8345, -301.8082" QuestId="67840" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017407" XYZ="-128.3437, 125.9232, -314.6258" QuestId="67840" StepId="2" MapId="400" />
    <!-- Shearing Machine Component -->
    <While Condition="GetQuestStep(67840) == 3 and not HasAtLeast(15736,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31607"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31633"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31659"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31685"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31711"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31737"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31763"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31789"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15736,3)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15736" NpcId="1017408" XYZ="-108.5985, 122.4421, -318.3185" QuestId="67840" StepId="3" MapId="400" />
    <!-- With a Little Help -->
    <SoTalkTo NpcId="1017351" XYZ="-74.80785, -8.19637, 158.7234" QuestId="67826" StepId="1" MapId="400" />
    <!-- Training Supplies -->
    <While Condition="GetQuestStep(67826) == 2 and not HasAtLeast(15725,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31596"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31622"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31648"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31674"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31700"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31726"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31752"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31778"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15725,3)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15725" NpcId="1017352" XYZ="-55.90324, -8.866012, 162.7533" QuestId="67826" StepId="2" MapId="400" />
    <SoHandOver ItemIds="2001982" NpcId="1017353" XYZ="-34.25447, -8.866012, 163.0346" QuestId="67826" StepId="3" Objective="0" Count="1" MapId="400" />
    <SoHandOver ItemIds="2001982" NpcId="1017354" XYZ="-103.5091, -8.217802, 196.1738" QuestId="67826" StepId="3" Objective="0" Count="2" MapId="400" />
    <SoHandOver ItemIds="2001982" NpcId="1017355" XYZ="-110.8665, -8.773639, 244.5304" QuestId="67826" StepId="3" MapId="400" />
    <!-- A Fundamentally Important Task -->
    <SoTalkTo NpcId="1017357" XYZ="312.3673, -35.70687, 89.25" QuestId="67828" StepId="1" Objective="0" MapId="400" />
    <SoTalkTo NpcId="1017358" XYZ="837.9186, -3.011582, 211.5663" QuestId="67828" StepId="1" MapId="400" />
    <!-- Moogle on the Wall -->
    <SoTalkTo  NpcId="1017364" XYZ="517.7092, -11.3913, 82.85227" QuestId="67830" StepId="1" MapId="400" />
    <SoUseObject NpcIds="2007225,2007226,2007227" QuestId="67830" StepId="2" MapId="400">
      <HotSpots>
        <HotSpot XYZ="412.3574, -22.55554, 16.53531" Radius="15" />
        <HotSpot XYZ="428.6885, -27.57543, 142.3216" Radius="15" />
        <HotSpot XYZ="439.0774, -31.64589, 205.1821" Radius="15" />
      </HotSpots>
    </SoUseObject>
    <SoHandOver ItemIds="2001986" NpcId="1017364" XYZ="517.7092, -11.3913, 82.85227" QuestId="67830" StepId="3" MapId="400" />
    <While Condition="GetQuestStep(67830) == 255 and not HasAtLeast(15729,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31600"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31626"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31652"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31678"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31704"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31730"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31756"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31782"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15729,3)">
      <StopCrafting />
    </If>
    <!-- A Fine Finish -->
    <SoTalkTo NpcId="1017377" XYZ="562.5542, -1.191689, -372.143" QuestId="67834" StepId="1" MapId="400" />
    <!-- Veneer Component -->
    <While Condition="GetQuestStep(67834) == 2 and not HqHasAtLeast(15731,1)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31602"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31628"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31654"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31680"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31706"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31732"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31758"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31784"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15731,1)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15731" NpcId="1017378" XYZ="556.6415, -0.916756, -385.3574" QuestId="67834" StepId="2" MapId="400" />
     <!-- Hasty Conclusions -->
    <SoTalkTo NpcId="1017356" XYZ="676.1425, -0.4951096, 11.55096" QuestId="67827" StepId="1" MapId="400" />
    <!-- Repurposed Construction Component -->
    <While Condition="GetQuestStep(67827) == 255 and not HasAtLeast(15726,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31597" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31623" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31649" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31675" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31701" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31727" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31753" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31779" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105" />
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15726,3)">
      <StopCrafting />
    </If>
    <!-- Tricks Without Treats -->
    <SoTalkTo NpcId="1017321" XYZ="-375.2285, 60.89619, 319.1727" QuestId="67837" StepId="1" MapId="400" />
    <!-- Exploding Kupo Nut -->
    <While Condition="GetQuestStep(67837) == 2 and not HqHasAtLeast(15734,1)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31605"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31631"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31657"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31683"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31709"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31735"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31761"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31787"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15734,1)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15734" NpcId="1017392" XYZ="112.2835, -24.13426, 167.5656" QuestId="67837" StepId="2" MapId="400" />
    <SoUseObject NpcIds="2007234" XYZ="111.5968, -21.98, 193.1888" Radius="15" QuestId="67837" StepId="3" MapId="400" />
    <SoTalkTo NpcId="1017392" XYZ="112.2381, -24.01939, 168.9003" QuestId="67837" StepId="4" MapId="400" />
    <!-- Deep into the Weeds -->
    <SoTalkTo NpcId="1017359" XYZ="401.9989, -6.0554, 581.6586" QuestId="67829" StepId="1" MapId="400" />
    <SoUseObject NpcIds="1017361" XYZ="177.7218, -33.74496, 486.8695" Radius="10" QuestId="67829" StepId="2" Objective="0" Count="1" MapId="400" />
    <SoUseObject NpcIds="1017362" XYZ="279.3468, -37.98297, 487.6936" Radius="10" QuestId="67829" StepId="2" Objective="0" Count="2" MapId="400" />
    <SoUseObject NpcIds="1017363" XYZ="320.8818, -13.41683, 439.0782" Radius="10" QuestId="67829" StepId="2" MapId="400" />
    <SoHandOver ItemIds="2001985" NpcId="1017359" XYZ="401.9989, -6.0554, 581.6586" QuestId="67829" StepId="3" MapId="400" />
    <!-- Basket Component -->
    <While Condition="GetQuestStep(67829) == 4 and not HasAtLeast(15728,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31599" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31625" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31651" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31677" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31703" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31729" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31755" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31781" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105" />
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15728,3)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15728" NpcId="1017360" XYZ="395.9868, -5.798145, 587.3655" QuestId="67829" StepId="4" MapId="400" />
    <!-- Work That Mallow -->
    <SoTalkTo NpcId="1017369" XYZ="445.3478, -5.717677, 652.4871" QuestId="67832" StepId="1" MapId="400" />
    <!-- Gathering Tool Components -->
    <While Condition="GetQuestStep(67832) == 2 and not HasAtLeast(15730,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31601"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31627"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31653"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31679"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31705"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31731"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31757"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31783"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15730,3)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15730" NpcId="1017370" XYZ="455.6715, -5.618199, 675.9018" QuestId="67832" StepId="2" MapId="400" />
    <!-- Kupo for Kupo Nuts -->
    <SoEmoteNpc Emote="say free kupo nuts" NpcIds="1017368,1017367,1017366,1017365" QuestId="67831" StepId="1" MapId="400">
      <HotSpots>
        <HotSpot XYZ="450.8782, -5.898187, 649.6019" Radius="15" />
        <HotSpot XYZ="484.3187, -7.777609, 716.6257" Radius="15" />
        <HotSpot XYZ="295.0609, -47.24789, 671.3457" Radius="15" />
        <HotSpot XYZ="254.7876, -43.72188, 637.8293" Radius="15" />
      </HotSpots>
    </SoEmoteNpc>
    <!-- Rare Refreshments -->
    <SoMoveTo XYZ="233.2397, -42.46527, 611.4952" QuestId="67843" StepId="1" MapId="400" />
    <SoTalkTo NpcId="1017412" XYZ="402.4567, -74.34704, 636.6826" QuestId="67843" StepId="1" NoFlight="True" MapId="400" />
    <!-- Mogstew Miscellany -->
    <While Condition="GetQuestStep(67843) == 2 and not HasAtLeast(15738,3)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31609"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31635"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31661"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31687"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31713"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31739"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31765"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31791"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15738,3)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15738" NpcId="1017413" XYZ="397.9705, -72.34406, 653.0403" QuestId="67843" StepId="2" MapId="400" />
    <!-- A Stone's Throw Away  -->
    <SoTalkTo NpcId="1017414" XYZ="420.3707, -10.76561, 705.4398" QuestId="67844" StepId="1" MapId="400" />
    <SoUseObject NpcIds="2007249,2007250,2007251,2007252" QuestId="67844" StepId="2" PersistentObject="True" MapId="400">
      <HotSpots>
        <HotSpot XYZ="73.77734, -32.73065, -183.0625" Radius="15" />
        <HotSpot XYZ="107.4387, -29.03796, -213.5195" Radius="15" />
        <HotSpot XYZ="251.1787, -34.25659, -206.4698" Radius="15" />
        <HotSpot XYZ="170.0007, -37.46094, -203.1129" Radius="15" />
      </HotSpots>
    </SoUseObject>
    <SoHandOver ItemIds="2001991" NpcId="1017414" XYZ="420.3707, -10.76561, 705.4398" QuestId="67844" StepId="3" MapId="400" />
    <!-- The Mining Mishap -->
    <SoTalkTo NpcId="1017379" XYZ="-182.7587, 181.9491, -758.6961" QuestId="67835" StepId="1" MapId="400" />
    <!-- Aetheric Shielding -->
    <While Condition="GetQuestStep(67835) == 2 and not HasAtLeast(15732,2)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31603"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31629"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31655"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31681"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31707"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31733"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31759"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090"/>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31785"/>
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105"/>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15732,2)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15732" NpcId="1017380" XYZ="-172.4833, 178.7425, -772.0038" QuestId="67835" StepId="2" MapId="400" />
    <!-- Stumbling Blocks -->
    <SoTalkTo NpcId="1017383" XYZ="-656.2722, 73, 220.812" QuestId="67836" StepId="1" MapId="400" />
    <!-- Stonemasonry Supplies -->
    <While Condition="GetQuestStep(67836) == 2 and not HqHasAtLeast(15733,1)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31604"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="244"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Basic Synthesis" ActionId="100001"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="260"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Advanced Touch" ActionId="100008"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31630"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="245"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Basic Synthesis" ActionId="100015"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="261"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Advanced Touch" ActionId="100022"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31656"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="246"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Basic Synthesis" ActionId="100030"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="262"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Advanced Touch" ActionId="100038"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31682"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="247"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Basic Synthesis" ActionId="100075"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="263"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Advanced Touch" ActionId="100081"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31708"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="249"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Basic Synthesis" ActionId="100045"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="265"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Advanced Touch" ActionId="100052"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31734"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="248"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Basic Synthesis" ActionId="100060"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="264"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Advanced Touch" ActionId="100068"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31760"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="250"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Basic Synthesis" ActionId="100090"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="266"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Advanced Touch" ActionId="100097"/>
          </If>
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31786"/>
        <While Condition="CraftingManager.IsCrafting">
          <If Condition="Core.Player.CurrentCPPercent == 100">
            <CraftAction Name="Steady Hand" ActionId="251"/>
          </If>
          <If Condition="CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Basic Synthesis" ActionId="100105"/>
          </If>
          <If Condition="not Core.Me.HasAura(254) and not CraftingManager.HQPercent &gt; 80">
            <CraftAction Name="Great Strides" ActionId="267"/>
          </If>
          <If Condition="not CraftingManager.HQPercent &gt; 95">
            <CraftAction Name="Advanced Touch" ActionId="100112"/>
          </If>
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HqHasAtLeast(15733,1)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15733" NpcId="1017384" XYZ="-652.2557, 73, 217.43" QuestId="67836" StepId="2" DialogOption="0" MapId="400" />
    <SoTalkTo NpcId="1017387" XYZ="-59.29661, -8.844474, 185.9052" QuestId="67836" StepId="3" MapId="400" />
    <!-- A Fundamentally Important Task -->
    <SoHandOver ItemIds="2001983,2001984" NpcId="1017471" XYZ="-391.0735, 59.9946, 303.1814" QuestId="67828" StepId="2" MapId="400" />
    <!-- Foundation Component -->
    <While Condition="GetQuestStep(67828) == 255 and not HasAtLeast(15727,2)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31598" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31624" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31650" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31676" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31702" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31728" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31754" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31780" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105" />
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15727,2)">
      <StopCrafting />
    </If>
    <!-- Mine and Craft -->
    <SoTalkTo NpcId="1017465" XYZ="202.2888, 42.30941, -577.3861" QuestId="67853" StepId="1" MapId="400" />
    <!-- Treadwheel Crane Component -->
    <While Condition="GetQuestStep(67853) == 2 and not HasAtLeast(15744,2)">
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Carpenter">
        <Synthesize RecipeId="31615" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100001" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Blacksmith">
        <Synthesize RecipeId="31641" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100015" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Armorer">
        <Synthesize RecipeId="31667" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100030" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Goldsmith">
        <Synthesize RecipeId="31693" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100075" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Leatherworker">
        <Synthesize RecipeId="31719" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100045" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Weaver">
        <Synthesize RecipeId="31745" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100060" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Alchemist">
        <Synthesize RecipeId="31771" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100090" />
        </While>
      </If>
      <If Condition="Core.Player.CurrentJob == Enums.ClassJobType.Culinarian">
        <Synthesize RecipeId="31797" />
        <While Condition="CraftingManager.IsCrafting">
          <CraftAction Name="Basic Synthesis" ActionId="100105" />
        </While>
      </If>
    </While>
    <If Condition="CraftingLog.IsOpen and HasAtLeast(15744,2)">
      <StopCrafting />
    </If>
    <SoHandOver ItemIds="15744" NpcId="1017466" XYZ="176.7147, 42.30863, -571.3741" QuestId="67853" StepId="2" MapId="400" />
    <!-- An Ishgardian Treat -->
    <SoHandOver ItemIds="15743" NpcId="1017321" XYZ="-376.4859, 60.89619, 319.7832" QuestId="67852" StepId="3" MapId="400" />
    <SoHandOver ItemIds="2002000" NpcId="1017463" XYZ="-380.2396, 59.99458, 281.8494" QuestId="67852" StepId="4" Objective="0" Count="1" MapId="400" />
    <SoHandOver ItemIds="2002000" NpcId="1017464" XYZ="-118.4863, 36.39444, 163.2257" QuestId="67852" StepId="4" Objective="0" Count="2" MapId="400" />
    <SoHandOver ItemIds="2002000" NpcId="1017351" XYZ="-74.87604, -8.172174, 158.709" QuestId="67852" StepId="4" MapId="400" />
    <!-- Rare Refreshments -->
    <SoHandOver ItemIds="2001990" NpcId="1017321" XYZ="-376.4859, 60.89619, 319.7832" QuestId="67843" StepId="3" MapId="400" />
    <!-- Turn In -->
    <If Condition="&doTurnIn;">
      <!-- With a Little Help -->
      <SoTurnIn QuestId="67826" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Hasty Conclusions -->
      <SoTurnIn ItemIds="15726" QuestId="67827" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- A Fundamentally Important Task -->
      <SoTurnIn ItemIds="15727" QuestId="67828" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Deep into the Weeds -->
      <SoTurnIn QuestId="67829" NpcId="1017171" XYZ="-335.5612, 59.00343, 313.9849" MapId="400" />
      <!-- Moogle on the Wall -->
      <SoTurnIn ItemIds="15729" QuestId="67830" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Kupo for Kupo Nuts -->
      <SoTurnIn QuestId="67831" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Work That Mallow -->
      <SoTurnIn QuestId="67832" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- A Little Pick-Me-Up -->
      <SoTurnIn QuestId="67833" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- A Fine Finish -->
      <SoTurnIn QuestId="67834" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- The Mining Mishap -->
      <SoTurnIn QuestId="67835" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Stumbling Blocks -->
      <SoTurnIn ItemIds="2001987" QuestId="67836" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Tricks Without Treats -->
      <SoTurnIn QuestId="67837" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- For Moogles in Peril -->
      <SoTurnIn QuestId="67838" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- The Negotiator -->
      <SoTurnIn QuestId="67839" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Back to the Drawing Board  -->
      <SoTurnIn QuestId="67840" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Built to Last -->
      <SoTurnIn QuestId="67841" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Let There Be Light -->
      <SoTurnIn QuestId="67842" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Rare Refreshments -->
      <SoTurnIn QuestId="67843" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- A Stones Throw Away -->
      <SoTurnIn QuestId="67844" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- A Reviving Roar -->
      <SoTurnIn QuestId="67845" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Journey of a Thousand Hews -->
      <SoTurnIn QuestId="67846" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Ship of Dreams -->
      <SoTurnIn QuestId="67847" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Stirring by Stemutation -->
      <SoTurnIn QuestId="67848" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Dragon Draff For Their Behalf -->
      <SoTurnIn QuestId="67849" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- A Fish for His Favor -->
      <SoTurnIn QuestId="67850" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- From Lax to Max -->
      <SoTurnIn QuestId="67851" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- An Ishgardian Treat -->
      <SoTurnIn QuestId="67852" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Mine and Craft -->
      <SoTurnIn QuestId="67853" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- The Moogle Motivator -->
      <SoTurnIn QuestId="67854" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <!-- Tremble Finishing -->
      <SoTurnIn QuestId="67855" NpcId="1017171" XYZ="-334.9032, 58.91553, 315.6107" MapId="400" />
      <SoSendCommand GearSet="&combatGearSet;" />
    </If>
  </Order>
</Profile>